# CurnexaHealthAI

## Overview

CurnexaHealthAI is a healthcare AI platform designed for healthcare professionals, particularly doctors, to integrate with Epic EMR systems and leverage advanced NLP capabilities through Meta's LLaMA 2. The platform enables doctors to enter a patient ID and receive AI-driven clinical decision support by analyzing patient data, relevant medical literature from PubMed, and insights generated by LLaMa 2.

## Project Structure

- app/: Core application code, including Flask web server routes and views.
- data/: Datasets, including data fetched from PubMed or Epic EMR.
- utils/: Utility scripts and helper functions.
- models/: Includes the integration with Meta's LLaMA 2 for NLP processing.
- fhir/: FHIR API client (fhir_client.py) for interacting with Epic EMR systems.
- auth/: Authentication handlers (oauth_handler.py) for OAuth integration.
- app/routes.py: Flask routes for handling web requests.
- tests/: Unit tests and integration tests.
- docs/: Additional documentation, API guides, etc.
- main.py: The main entry point for the Flask application, located in the root directory.

## Setup

### Prerequisites

Python 3.x
pip (Python package manager)
Flask
Access to Epic's FHIR API and Meta's LLaMA
Installation
Clone the repository:

```
git clone https://github.com/SGJIII/CurnexaHealthAI.git
cd CurnexaHealthAI
```

#Install dependencies:

```
pip install -r requirements.txt
```

Run the application

```
python main.py
```

## Auth Integration with Epic EMR

The project includes OAuth integration for secure access to Epic's FHIR API, allowing the platform to fetch patient data directly from Epic EMR systems.

## PubMed API Integration

The project integrates with the PubMed API to fetch relevant medical articles, extracting only the article title and abstract for analysis and integration.

## LLaMa 2 Integration

CurnexaHealthAI utilizes Meta's LLaMa 2 for advanced NLP processing. It generates clinical decision support by analyzing patient data in conjunction with relevant medical literature fetched from PubMed.

## Usage

1. Start the Flask server.
2. Authenticate using the OAuth 2.0 flow.
3. Enter a patient's FHIR ID to fetch their data.
4. View the generated clinical recommendations based on the

## Testing with FHIR Sandbox Data

To test the application with FHIR sandbox data:

1. Ensure access to the Epic FHIR sandbox environment.
2. Use a test patient ID from the sandbox to fetch patient data.
3. Validate that the patient data is retrieved in the correct format and contains the necessary fields (age, gender, symptoms, etc.).
4. Test the PubMed API integration to ensure relevant articles are fetched based on the patient data.
5. Verify that the LLaMa 2 integration processes the combined data correctly and provides meaningful clinical insights.

## Next Steps

##### Expanding Data Extracted from FHIR:

- Extend the application's capability to extract and utilize more patient data fields from the FHIR API for a more comprehensive PubMed search and LLaMa query.

APIs

- MedicationRequest.Search (Orders) (R4)
- AllergyIntolerance.Search (R4)
- Condition.Search (Medical History) (R4)
- Observation.Search (Social History) (R4)

##### Deploy to production

##### Edit base URL depending on the hospital the user is associated

##### Update onboarding flow so user can choose their hospital, then click authenticate, then start using app.

## TODO

- Get patient fhir id from MRN using patient.read, then use fhir id for the rest of the api calls.
- Add appointment.search (scheduled surgery) api
- Create seperate app for the following
  - Intake symptoms
  - summarize relevant aspects of patient medical history
- Look at DocumentReference.Search (Clinical Notes) (STU3) api results
- Map out how to piece together DocumentReference.Search (Clinical Notes) (R4) with nothing but an MRN
- List out labs for patient MRN
  - Chat bot to ask questions about type of research and labs needed to prime the project
  - Repeat project for list of MRNs

## Implement FHIR API Integration and Update Workflow

- Integrated OAuth authentication with Epics FHIR API in `fhir/fhir_client.py`.
- Enhanced `main.py` to support fetching patient data using the patient ID provided by the user.
- Updated PubMed API integration to fetch article titles and abstracts based on patient data.
- Integrated LLaMa 2 for generating clinical decision support using patient data and PubMed articles.
- Added `app/routes.py` for handling Flask web requests and OAuth callbacks.
- Revised README to include detailed usage instructions, testing steps with FHIR sandbox data, and updated project structure.
